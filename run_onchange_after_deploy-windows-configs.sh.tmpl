#!/bin/bash
# Windows configs hash: {{ include "windows/alacritty/alacritty.toml" | sha256sum }}

{{ if eq .chezmoi.os "linux" -}}
# Only run in WSL
if grep -qi microsoft /proc/version 2>/dev/null; then
    echo "Deploying Windows configs from WSL..."

    # Get Windows username
    WIN_USER=$(cmd.exe /c "echo %USERNAME%" 2>/dev/null | tr -d '\r')

    if [ -n "$WIN_USER" ]; then
        # Alacritty config
        ALACRITTY_DIR="/mnt/c/Users/${WIN_USER}/AppData/Roaming/alacritty"
        mkdir -p "$ALACRITTY_DIR"
        cp "{{ .chezmoi.sourceDir }}/windows/alacritty/alacritty.toml" "$ALACRITTY_DIR/alacritty.toml"
        echo "  Deployed alacritty.toml"

        echo "Windows configs deployed successfully!"
    else
        echo "Could not determine Windows username, skipping Windows config deployment"
    fi
fi
{{- end }}
